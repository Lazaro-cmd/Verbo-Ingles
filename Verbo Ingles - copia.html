<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Visualizador y Pr√°ctica de Verbos Ingl√©s</title>
  <style>
    :root { --bg: #f4f5fa; --fg: #1a1a1c; }
    @media (prefers-color-scheme: dark) {
      :root { --bg: #181a25; --fg: #f0f0fa; }
    }
    body { font-family: Inter, Arial, sans-serif; background: var(--bg); color: var(--fg); margin:0;}
    #app { max-width:760px; margin:36px auto;}
    .card { border-radius:14px; background: #fff; box-shadow:0 2px 14px #23224515; padding:30px; margin-bottom:18px;}
    @media (prefers-color-scheme: dark) {
      .card { background:#232e41; color:#e7eaea; }
    }
    .controls { display:flex; gap: 10px; flex-wrap:wrap; align-items:center; margin-bottom:18px; }
    .controls input, .controls select { font-size:1em; border-radius:6px; border:1px solid #ccc; padding:7px; }
    .controls button { border-radius:6px; background:#4f8cff; color:#fff; border:none; padding:8px 18px; cursor:pointer;}
    .controls button:disabled { background:#bbb; cursor:auto;}
    .stats { margin:12px 0; color:var(--muted);}
    .practice input { width:110px; font-size:1em; padding:7px; margin:0 6px 8px 0; }
    .practice { margin:16px 0;}
    .practice button { background:#10b981; color:#fff; border:none; border-radius:6px; padding:7px 16px;}
    .audio-btn { background:#22d3ee; color:#fff; border:none; border-radius:5px; margin:2px 8px; padding:5px 10px; cursor:pointer;}
    .filter { margin:10px 0; }
    .ipa { color: #666; font-size: 0.9em; margin: 4px 0; }
    .meaning { color: #555; font-style: italic; margin: 6px 0; }
  </style>
</head>
<body>
  <div id="app"></div>
  <script>
    // Nueva estructura de verbos: base, past, part, ipa_us, ipa_uk, meaning, type
    const verbs = [
      { base: "arise", past: "arose", part: "arisen", ipa_us: "/…ôÀàra…™z/", ipa_uk: "/…ôÀàra…™z/", meaning: "surgir, levantarse", type: "irregular" },
      { base: "accept", past: "accepted", part: "accepted", ipa_us: "/…ôkÀàs…õpt/", ipa_uk: "/…ôkÀàs…õpt/", meaning: "aceptar", type: "regular" },
      { base: "begin", past: "began", part: "begun", ipa_us: "/b…™Àà…°…™n/", ipa_uk: "/b…™Àà…°…™n/", meaning: "empezar, comenzar", type: "irregular" },
      { base: "walk", past: "walked", part: "walked", ipa_us: "/w…îk/", ipa_uk: "/w…îÀêk/", meaning: "caminar", type: "regular" },
      { base: "speak", past: "spoke", part: "spoken", ipa_us: "/spik/", ipa_uk: "/spiÀêk/", meaning: "hablar", type: "irregular" },
      { base: "write", past: "wrote", part: "written", ipa_us: "/ra…™t/", ipa_uk: "/ra…™t/", meaning: "escribir", type: "irregular" },
      { base: "read", past: "read", part: "read", ipa_us: "/rid/", ipa_uk: "/riÀêd/", meaning: "leer", type: "irregular" },
      { base: "think", past: "thought", part: "thought", ipa_us: "/Œ∏…™≈ãk/", ipa_uk: "/Œ∏…™≈ãk/", meaning: "pensar", type: "irregular" },
      { base: "know", past: "knew", part: "known", ipa_us: "/no ä/", ipa_uk: "/n…ô ä/", meaning: "saber, conocer", type: "irregular" },
      { base: "take", past: "took", part: "taken", ipa_us: "/te…™k/", ipa_uk: "/te…™k/", meaning: "tomar, llevar", type: "irregular" }
    ];

    let idx = 0, typeFilter = 'todos', tries = 0, correct = 0;

    function filteredVerbs() {
      if (typeFilter === 'todos') return verbs;
      return verbs.filter(v => v.type === typeFilter);
    }

    function renderControls() {
      const arr = filteredVerbs();
      document.getElementById('controls').innerHTML = `
        <input id="search" placeholder="Buscar verbo..." />
        <button onclick="buscar(document.getElementById('search').value)">Buscar</button>
        <button onclick="back()" ${idx<=0?'disabled':''}>&larr; Atr√°s</button>
        <span>${idx+1} / ${arr.length}</span>
        <button onclick="next()" ${idx>=arr.length-1?'disabled':''}>Siguiente &rarr;</button>
        <div class="filter">
          <label>Tipo: </label>
          <select id="typeFilter" onchange="typeFilter=this.value; idx=0; renderControls(); renderCard();">
            <option value="todos" ${typeFilter==='todos'?'selected':''}>Todos</option>
            <option value="regular" ${typeFilter==='regular'?'selected':''}>Regular</option>
            <option value="irregular" ${typeFilter==='irregular'?'selected':''}>Irregular</option>
          </select>
        </div>
      `;
    }

    function renderCard() {
      const arr = filteredVerbs();
      if (arr.length === 0) {
        document.getElementById('app').innerHTML = '<div class="card"><h2>No hay verbos</h2></div>';
        return;
      }
      const v = arr[idx];
      document.getElementById('app').innerHTML = `
        <div class="card">
          <h2>Verbo: ${v.base}</h2>
          <p class="ipa"><strong>IPA US:</strong> ${v.ipa_us} &nbsp; <strong>IPA UK:</strong> ${v.ipa_uk}</p>
          <p class="meaning"><strong>Significado:</strong> ${v.meaning}</p>
          <p><strong>Pasado:</strong> ${v.past}</p>
          <p><strong>Participio:</strong> ${v.part}</p>
          <p><strong>Tipo:</strong> ${v.type}</p>
          <button class="audio-btn" onclick="speak('${v.base}', 'en-US')">üîä US</button>
          <button class="audio-btn" onclick="speak('${v.base}', 'en-GB')">üîä UK</button>
          <div class="practice">
            <h3>Pr√°ctica Escrita</h3>
            <p>Escribe las formas del verbo <strong>${v.base}</strong>:</p>
            <div>
              <label>Pasado: </label><input id="inPast" placeholder="past" />
              <label>Participio: </label><input id="inPart" placeholder="participle" />
              <button onclick="checkPractice()">Verificar</button>
            </div>
            <p id="feedback"></p>
          </div>
        </div>
        <div class="card stats">
          <h3>Estad√≠sticas</h3>
          <p>Intentos: ${tries} | Correctos: ${correct}</p>
        </div>
        <div id="controls" class="card"></div>
      `;
      renderControls();
    }

    function speak(text, lang) {
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = lang;
        speechSynthesis.speak(utterance);
      } else {
        alert('Tu navegador no soporta s√≠ntesis de voz.');
      }
    }

    window.next = function() {
      if(idx < filteredVerbs().length-1) ++idx;
      renderControls(); renderCard();
    }

    window.back = function() {
      if(idx > 0) --idx;
      renderControls(); renderCard();
    }

    window.buscar = function(q) {
      const arr = filteredVerbs();
      const term = q.trim().toLowerCase();
      if (!term) { idx = 0; renderControls(); renderCard(); return; }
      const i = arr.findIndex(v =>
        v.base.toLowerCase().includes(term) ||
        v.past.toLowerCase().includes(term) ||
        v.part.toLowerCase().includes(term) ||
        v.meaning.toLowerCase().includes(term)
      );
      idx = i>=0 ? i : 0;
      renderControls(); renderCard();
    };

    window.checkPractice = function() {
      tries++;
      const arr = filteredVerbs();
      const v = arr[idx];
      const p = document.getElementById("inPast").value.trim().toLowerCase();
      const part = document.getElementById("inPart").value.trim().toLowerCase();
      let ok = (p === v.past.toLowerCase().split(" / ")[0]) && (part === v.part.toLowerCase().split(" / ")[0]);
      correct += ok ? 1 : 0;
      document.getElementById("feedback").innerHTML = ok ? "<span style='color:green'>‚úîÔ∏è Correcto</span>" : "<span style='color:red'>‚ùå Intenta otra vez</span>";
      renderControls();
    };

    renderControls(); renderCard();
  </script>
</body>
</html>
